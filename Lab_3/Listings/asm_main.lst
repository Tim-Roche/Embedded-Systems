


ARM Macro Assembler    Page 1 


    1 00000000 40004C04 
                       P1DIR   EQU              0x40004C04
    2 00000000 40004C02 
                       P1OUT   EQU              0x40004C02
    3 00000000         
    4 00000000 40004C05 
                       P2DIR   EQU              0x40004C05
    5 00000000 40004C03 
                       P2OUT   EQU              0x40004C03
    6 00000000         
    7 00000000 40004C06 
                       P1REN   EQU              0x40004C06
    8 00000000 40004C07 
                       P2REN   EQU              0x40004C07
    9 00000000         
   10 00000000 40004C00 
                       P1IN    EQU              0x40004C00
   11 00000000 40004C01 
                       P2IN    EQU              0x40004C01
   12 00000000         
   13 00000000 00000001 
                       redMASK EQU              0x1
   14 00000000 00000002 
                       greenMASK
                               EQU              0x2
   15 00000000 00000004 
                       blueMASK
                               EQU              0x4
   16 00000000         
   17 00000000 00000002 
                       tstMASK EQU              0x2
   18 00000000 00000008 
                       ackMASK EQU              0x8
   19 00000000 00000040 
                       flaMASK EQU              0x40
   20 00000000 00000008 
                       olaMASK EQU              0x8
   21 00000000         
   22 00000000                 THUMB
   23 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   24 00000000                 EXPORT           asm_main
   25 00000000         
   26 00000000         asm_main
   27 00000000         ;INPUTS:  P1.1 (TST) 
   28 00000000         ;         P1.4 (ACK) 
   29 00000000         ;         P2.6 (FLA) 
   30 00000000         ;         P2.7 (OLA)
   31 00000000         ;OUTPUTS: P1.0 RED 
   32 00000000         ;         P2.1 GREEN 
   33 00000000         ;         P2.2 BLUE
   34 00000000         ; make ALL INPUTS
   35 00000000         
   36 00000000         ;Set Inputs
   37 00000000 4851            LDR              R0, =P1DIR  ; load Dir Reg in R
                                                            1
   38 00000002 7801            LDRB             R1, [R0]    ; 
   39 00000004 F021 0102       BIC              R1, tstMASK ; set bit 0
   40 00000008 7001            STRB             R1, [R0]    ; store back to Dir



ARM Macro Assembler    Page 2 


                                                             Reg
   41 0000000A         
   42 0000000A 484F            LDR              R0, =P1DIR  ; load Dir Reg in R
                                                            1
   43 0000000C 7801            LDRB             R1, [R0]    ; 
   44 0000000E F021 0108       BIC              R1, ackMASK ; set bit 0
   45 00000012 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   46 00000014         
   47 00000014 484D            LDR              R0, =P2DIR  ; load Dir Reg in R
                                                            1
   48 00000016 7801            LDRB             R1, [R0]    ; 
   49 00000018 F021 0140       BIC              R1, flaMASK ; set bit 0
   50 0000001C 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   51 0000001E         
   52 0000001E 484B            LDR              R0, =P2DIR  ; load Dir Reg in R
                                                            1
   53 00000020 7801            LDRB             R1, [R0]    ; 
   54 00000022 F021 0108       BIC              R1, olaMASK ; set bit 0
   55 00000026 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   56 00000028         
   57 00000028         ;Set Outputs
   58 00000028 4847            LDR              R0, =P1DIR  ; load Dir Reg in R
                                                            1
   59 0000002A 7801            LDRB             R1, [R0]    ; 
   60 0000002C F041 0101       ORR              R1, redMASK ; set bit 0
   61 00000030 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg  
   62 00000032         
   63 00000032 4846            LDR              R0, =P2DIR  ; load Dir Reg in R
                                                            1
   64 00000034 7801            LDRB             R1, [R0]    ; 
   65 00000036 F041 0102       ORR              R1, greenMASK ; set bit 0
   66 0000003A 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg 
   67 0000003C         
   68 0000003C 4843            LDR              R0, =P2DIR  ; load Dir Reg in R
                                                            1
   69 0000003E 7801            LDRB             R1, [R0]    ; 
   70 00000040 F041 0104       ORR              R1, blueMASK ; set bit 0
   71 00000044 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg 
   72 00000046         
   73 00000046         ;Set Pull-up Resistors
   74 00000046 4842            LDR              R0, =P1REN  ; load Dir Reg in R
                                                            1
   75 00000048 7801            LDRB             R1, [R0]    ; 
   76 0000004A F041 0102       ORR              R1, tstMASK ; set bit 0
   77 0000004E 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   78 00000050         
   79 00000050 483F            LDR              R0, =P1REN  ; load Dir Reg in R
                                                            1
   80 00000052 7801            LDRB             R1, [R0]    ; 
   81 00000054 F041 0108       ORR              R1, ackMASK ; set bit 0
   82 00000058 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg



ARM Macro Assembler    Page 3 


   83 0000005A         
   84 0000005A 483E            LDR              R0, =P2REN  ; load Dir Reg in R
                                                            1
   85 0000005C 7801            LDRB             R1, [R0]    ; 
   86 0000005E F041 0140       ORR              R1, flaMASK ; set bit 0
   87 00000062 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   88 00000064         
   89 00000064 483B            LDR              R0, =P2REN  ; load Dir Reg in R
                                                            1
   90 00000066 7801            LDRB             R1, [R0]    ; 
   91 00000068 F041 0108       ORR              R1, olaMASK ; set bit 0
   92 0000006C 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg  
   93 0000006E         
   94 0000006E         ;Set Pull-up Resistors set as outputs
   95 0000006E 483A            LDR              R0, =P1OUT  ; load Dir Reg in R
                                                            1
   96 00000070 7801            LDRB             R1, [R0]    ; 
   97 00000072 F041 0102       ORR              R1, tstMASK ; set bit 0
   98 00000076 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   99 00000078         
  100 00000078 4837            LDR              R0, =P1OUT  ; load Dir Reg in R
                                                            1
  101 0000007A 7801            LDRB             R1, [R0]    ; 
  102 0000007C F041 0108       ORR              R1, ackMASK ; set bit 0
  103 00000080 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
  104 00000082         
  105 00000082 4836            LDR              R0, =P2OUT  ; load Dir Reg in R
                                                            1
  106 00000084 7801            LDRB             R1, [R0]    ; 
  107 00000086 F041 0140       ORR              R1, flaMASK ; set bit 0
  108 0000008A 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
  109 0000008C         
  110 0000008C 4833            LDR              R0, =P2OUT  ; load Dir Reg in R
                                                            1
  111 0000008E 7801            LDRB             R1, [R0]    ; 
  112 00000090 F041 0108       ORR              R1, olaMASK ; set bit 0
  113 00000094 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg 
  114 00000096         loop
  115 00000096 F000 F847       BL               onRed
  116 0000009A F000 F827       BL               offBlue
  117 0000009E F000 F808       BL               checkTST    ; Returns TST in R0
                                                            
  118 000000A2 2801            CMP              R0, #1
  119 000000A4 D102            BNE              noEqual
  120 000000A6 F000 F845       BL               onGreen
  121 000000AA E7F4            B                loop
  122 000000AC         noEqual
  123 000000AC F000 F82E       BL               offGreen
  124 000000B0 E7F1            B                loop
  125 000000B2         
  126 000000B2         checkTST
  127 000000B2         ;INPUTS:  P1.1 (TST) 
  128 000000B2         ;         P1.4 (ACK) 



ARM Macro Assembler    Page 4 


  129 000000B2         ;         P2.6 (FLA) 
  130 000000B2         ;         P2.7 (OLA)
  131 000000B2 482B            LDR              R0,=P1IN    ; load Dir Reg in R
                                                            1
  132 000000B4 7801            LDRB             R1, [R0]    ; 
  133 000000B6 F011 0F02       TST              R1, #tstMASK
  134 000000BA BF0C 2001       MOVEQ            R0, 1
  135 000000BE 2000            MOVNE            R0, 0
  136 000000C0 4770            BX               LR
  137 000000C2         
  138 000000C2         checkFLA
  139 000000C2         ;INPUTS:  P1.1 (TST) 
  140 000000C2         ;         P1.4 (ACK) 
  141 000000C2         ;         P2.6 (FLA) 
  142 000000C2         ;         P2.7 (OLA)
  143 000000C2 4828            LDR              R0,=P2IN    ; load Dir Reg in R
                                                            1
  144 000000C4 7801            LDRB             R1, [R0]    ; 
  145 000000C6 F011 0F08       TST              R1, #olaMASK
  146 000000CA BF18 2001       MOVNE            R0, 1
  147 000000CE 4770            BX               LR
  148 000000D0         
  149 000000D0         checkACK
  150 000000D0         ;INPUTS:  P1.1 (TST) 
  151 000000D0         ;         P1.4 (ACK) 
  152 000000D0         ;         P2.6 (FLA) 
  153 000000D0         ;         P2.7 (OLA)
  154 000000D0 4824            LDR              R0,=P2IN    ; load Dir Reg in R
                                                            1
  155 000000D2 7801            LDRB             R1, [R0]    ; 
  156 000000D4 F011 0F08       TST              R1, #ackMASK
  157 000000D8 BF18 2001       MOVNE            R0, 1
  158 000000DC 4770            BX               LR
  159 000000DE         
  160 000000DE         
  161 000000DE         functionB
  162 000000DE F000 F80D       BL               offRed
  163 000000E2 F000 F803       BL               offBlue
  164 000000E6 F000 F825       BL               onGreen
  165 000000EA 4770            BX               LR
  166 000000EC         
  167 000000EC         offBlue
  168 000000EC         ; turn off blue LED
  169 000000EC 481B            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  170 000000EE 7801            LDRB             R1, [R0]
  171 000000F0 F06F 0204       MVN              R2, blueMASK ; load complement 
                                                            of bit 0 mask
  172 000000F4 EA01 0102       AND              R1, R2      ; clear bit 0
  173 000000F8 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  174 000000FA 4770            BX               LR
  175 000000FC         offRed
  176 000000FC         ; turn off red LED
  177 000000FC 4816            LDR              R0, =P1OUT  ; load Output Data 
                                                            Reg in R1
  178 000000FE 7801            LDRB             R1, [R0]
  179 00000100 F06F 0201       MVN              R2, #redMASK ; load complement 
                                                            of bit 0 mask



ARM Macro Assembler    Page 5 


  180 00000104 EA01 0102       AND              R1, R2      ; clear bit 0
  181 00000108 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  182 0000010A 4770            BX               LR
  183 0000010C         offGreen
  184 0000010C         ; turn off green LED
  185 0000010C 4813            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  186 0000010E 7801            LDRB             R1, [R0]
  187 00000110 F06F 0202       MVN              R2, #greenMASK ; load complemen
                                                            t of bit 0 mask
  188 00000114 EA01 0102       AND              R1, R2      ; clear bit 0
  189 00000118 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  190 0000011A 4770            BX               LR
  191 0000011C         onBlue
  192 0000011C         ; turn on blue LED
  193 0000011C 480F            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  194 0000011E 7801            LDRB             R1, [R0]
  195 00000120 F041 0104       ORR              R1, #blueMASK ; set bit 0
  196 00000124 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  197 00000126 4770            BX               LR
  198 00000128         onRed
  199 00000128         ; turn on Red LED
  200 00000128 480B            LDR              R0, =P1OUT  ; load Output Data 
                                                            Reg in R1
  201 0000012A 7801            LDRB             R1, [R0]
  202 0000012C F041 0101       ORR              R1, #redMASK ; set bit 0
  203 00000130 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  204 00000132 4770            BX               LR
  205 00000134         onGreen
  206 00000134         ; turn on blue LED
  207 00000134 4809            LDR              R0, =P2OUT  ; load Output Data 
                                                            Reg in R1
  208 00000136 7801            LDRB             R1, [R0]
  209 00000138 F041 0102       ORR              R1, greenMASK ; set bit 0
  210 0000013C 7001            STRB             R1, [R0]    ; store back to Out
                                                            put Data Reg
  211 0000013E 4770            BX               LR
  212 00000140         
  213 00000140         
  214 00000140         
  215 00000140         
  216 00000140         
  217 00000140         
  218 00000140         
  219 00000140         
  220 00000140         
  221 00000140         
  222 00000140         ; This subroutine performs a delay of n ms (for 3 MHz CP
                       U clock). 
  223 00000140         ; n is the value in R0.
  224 00000140         delayMs
  225 00000140 3801    L1      SUBS             R0, #1
  226 00000142 D1FD            BNE              L1
  227 00000144 4770            BX               LR



ARM Macro Assembler    Page 6 


  228 00000146         
  229 00000146 00 00           ALIGN
  230 00000148                 END
              40004C04 
              40004C05 
              40004C06 
              40004C07 
              40004C02 
              40004C03 
              40004C00 
              40004C01 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm_main.d -o.\objects\asm_main.o -I.\RTE\_Target_1 -
IC:\Users\TimRo\AppData\Local\Arm\Packs\ARM\CMSIS\5.6.0\CMSIS\Core\Include -IC:
\Users\TimRo\AppData\Local\Arm\Packs\TexasInstruments\MSP432P4xx_DFP\3.2.6\Devi
ce\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 528"
 --predefine="_RTE_ SETA 1" --predefine="__MSP432P401R__ SETA 1" --list=.\listi
ngs\asm_main.lst asm_main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 23 in file asm_main.s
   Uses
      None
Comment: .text unused
L1 00000140

Symbol: L1
   Definitions
      At line 225 in file asm_main.s
   Uses
      At line 226 in file asm_main.s
Comment: L1 used once
asm_main 00000000

Symbol: asm_main
   Definitions
      At line 26 in file asm_main.s
   Uses
      At line 24 in file asm_main.s
Comment: asm_main used once
checkACK 000000D0

Symbol: checkACK
   Definitions
      At line 149 in file asm_main.s
   Uses
      None
Comment: checkACK unused
checkFLA 000000C2

Symbol: checkFLA
   Definitions
      At line 138 in file asm_main.s
   Uses
      None
Comment: checkFLA unused
checkTST 000000B2

Symbol: checkTST
   Definitions
      At line 126 in file asm_main.s
   Uses
      At line 117 in file asm_main.s
Comment: checkTST used once
delayMs 00000140

Symbol: delayMs
   Definitions
      At line 224 in file asm_main.s
   Uses
      None
Comment: delayMs unused
functionB 000000DE

Symbol: functionB



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 161 in file asm_main.s
   Uses
      None
Comment: functionB unused
loop 00000096

Symbol: loop
   Definitions
      At line 114 in file asm_main.s
   Uses
      At line 121 in file asm_main.s
      At line 124 in file asm_main.s

noEqual 000000AC

Symbol: noEqual
   Definitions
      At line 122 in file asm_main.s
   Uses
      At line 119 in file asm_main.s
Comment: noEqual used once
offBlue 000000EC

Symbol: offBlue
   Definitions
      At line 167 in file asm_main.s
   Uses
      At line 116 in file asm_main.s
      At line 163 in file asm_main.s

offGreen 0000010C

Symbol: offGreen
   Definitions
      At line 183 in file asm_main.s
   Uses
      At line 123 in file asm_main.s
Comment: offGreen used once
offRed 000000FC

Symbol: offRed
   Definitions
      At line 175 in file asm_main.s
   Uses
      At line 162 in file asm_main.s
Comment: offRed used once
onBlue 0000011C

Symbol: onBlue
   Definitions
      At line 191 in file asm_main.s
   Uses
      None
Comment: onBlue unused
onGreen 00000134

Symbol: onGreen
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 205 in file asm_main.s
   Uses
      At line 120 in file asm_main.s
      At line 164 in file asm_main.s

onRed 00000128

Symbol: onRed
   Definitions
      At line 198 in file asm_main.s
   Uses
      At line 115 in file asm_main.s
Comment: onRed used once
16 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

P1DIR 40004C04

Symbol: P1DIR
   Definitions
      At line 1 in file asm_main.s
   Uses
      At line 37 in file asm_main.s
      At line 42 in file asm_main.s
      At line 58 in file asm_main.s

P1IN 40004C00

Symbol: P1IN
   Definitions
      At line 10 in file asm_main.s
   Uses
      At line 131 in file asm_main.s
Comment: P1IN used once
P1OUT 40004C02

Symbol: P1OUT
   Definitions
      At line 2 in file asm_main.s
   Uses
      At line 95 in file asm_main.s
      At line 100 in file asm_main.s
      At line 177 in file asm_main.s
      At line 200 in file asm_main.s

P1REN 40004C06

Symbol: P1REN
   Definitions
      At line 7 in file asm_main.s
   Uses
      At line 74 in file asm_main.s
      At line 79 in file asm_main.s

P2DIR 40004C05

Symbol: P2DIR
   Definitions
      At line 4 in file asm_main.s
   Uses
      At line 47 in file asm_main.s
      At line 52 in file asm_main.s
      At line 63 in file asm_main.s
      At line 68 in file asm_main.s

P2IN 40004C01

Symbol: P2IN
   Definitions
      At line 11 in file asm_main.s
   Uses
      At line 143 in file asm_main.s
      At line 154 in file asm_main.s

P2OUT 40004C03



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols


Symbol: P2OUT
   Definitions
      At line 5 in file asm_main.s
   Uses
      At line 105 in file asm_main.s
      At line 110 in file asm_main.s
      At line 169 in file asm_main.s
      At line 185 in file asm_main.s
      At line 193 in file asm_main.s
      At line 207 in file asm_main.s

P2REN 40004C07

Symbol: P2REN
   Definitions
      At line 8 in file asm_main.s
   Uses
      At line 84 in file asm_main.s
      At line 89 in file asm_main.s

ackMASK 00000008

Symbol: ackMASK
   Definitions
      At line 18 in file asm_main.s
   Uses
      At line 44 in file asm_main.s
      At line 81 in file asm_main.s
      At line 102 in file asm_main.s
      At line 156 in file asm_main.s

blueMASK 00000004

Symbol: blueMASK
   Definitions
      At line 15 in file asm_main.s
   Uses
      At line 70 in file asm_main.s
      At line 171 in file asm_main.s
      At line 195 in file asm_main.s

flaMASK 00000040

Symbol: flaMASK
   Definitions
      At line 19 in file asm_main.s
   Uses
      At line 49 in file asm_main.s
      At line 86 in file asm_main.s
      At line 107 in file asm_main.s

greenMASK 00000002

Symbol: greenMASK
   Definitions
      At line 14 in file asm_main.s
   Uses
      At line 65 in file asm_main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 187 in file asm_main.s
      At line 209 in file asm_main.s

olaMASK 00000008

Symbol: olaMASK
   Definitions
      At line 20 in file asm_main.s
   Uses
      At line 54 in file asm_main.s
      At line 91 in file asm_main.s
      At line 112 in file asm_main.s
      At line 145 in file asm_main.s

redMASK 00000001

Symbol: redMASK
   Definitions
      At line 13 in file asm_main.s
   Uses
      At line 60 in file asm_main.s
      At line 179 in file asm_main.s
      At line 202 in file asm_main.s

tstMASK 00000002

Symbol: tstMASK
   Definitions
      At line 17 in file asm_main.s
   Uses
      At line 39 in file asm_main.s
      At line 76 in file asm_main.s
      At line 97 in file asm_main.s
      At line 133 in file asm_main.s

15 symbols
368 symbols in table
